{"version":3,"sources":["services/entry.js","components/Filter.js","components/NewEntryForm.js","components/Person.js","components/PersonList.js","components/Message.js","App.js","index.js"],"names":["BASE_URL","entry","axios","post","then","response","data","get","id","delete","put","filterPattern","setFilterPattern","value","onChange","e","target","newName","setNewName","newNumber","setNewNumber","handleSubmit","onSubmit","type","name","number","makeClickHandler","onClick","PersonList","persons","personComponents","filter","toLowerCase","indexOf","map","Person","key","message","text","className","App","useState","setPersons","nameLookup","setNameLookup","setMessage","syncWithServer","entryService","lookup","forEach","useEffect","clearMessage","myMessage","clearTimeout","timeout","showMessage","msg","setTimeout","Message","Filter","NewEntryForm","preventDefault","window","confirm","catch","error","concat","alert","person","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.46724822.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://phonebook-fullstackopen-ende.herokuapp.com/api/persons';\n\nconst getAll = () =>\n    axios\n        .get(BASE_URL)\n        .then(response => response.data);\n\nconst create = (entry) => \n    axios\n        .post(BASE_URL, entry)\n        .then(response => response.data);\n\nconst remove = id => \n    axios\n        .delete(BASE_URL + id)\n        .then(response => response.data);\n\nconst update = data => \n    axios\n        .put(BASE_URL + data.id, data)\n        .then(response => response.data);\n\nexport default { create, getAll, remove, update };","import React from 'react';\n\nexport default ({ filterPattern, setFilterPattern }) =>\n    <>\n        <span>filter shown with</span> \n        <input value={filterPattern} onChange={(e) => setFilterPattern(e.target.value)}/> \n    </>;","import React from 'react';\n\nexport default ({newName, setNewName, newNumber, setNewNumber, handleSubmit}) =>\n    <form onSubmit={handleSubmit}>\n        <table>\n        <tbody>\n            <tr>\n            <td>name:</td>\n            <td><input value={newName} onChange={(e) => setNewName(e.target.value)} /></td>\n            </tr>\n            <tr>\n            <td>number:</td>\n            <td><input value={newNumber} onChange={(e) => setNewNumber(e.target.value)} /></td>\n            </tr>\n        </tbody>\n        </table>\n        <div>\n        <button type=\"submit\">add</button>\n        </div>\n    </form>;\n","import React from 'react';\n\nexport default ({data:{id, name, number}, makeClickHandler}) => \n    <tr>\n        <td>{name}</td>\n        <td>{number}</td>\n        <td><button onClick={makeClickHandler({id, name})}>delete</button></td>\n    </tr>;\n","import React from 'react';\nimport Person from './Person';\n\nfunction PersonList({persons, filterPattern, makeClickHandler}) {\n    const personComponents = \n        persons\n            .filter(({name}) => name.toLowerCase().indexOf(filterPattern.toLowerCase()) >= 0)\n            .map((data) => <Person key={data.id} data={data} makeClickHandler={makeClickHandler} />);\n\n    return <table>\n        <tbody>\n            {personComponents}\n        </tbody>\n    </table>;\n}\n\nexport default PersonList;","import React from 'react';\n\nexport default ({message: {text, type}}) => \n    <div className={\"message \" + (type === 1 ? \"success\" : \"error\")}>\n        <span>{text}</span>\n    </div>;","import React, { useState, useEffect } from 'react';\nimport entryService from './services/entry';\nimport Filter from './components/Filter';\nimport NewEntryForm from './components/NewEntryForm';\nimport PersonList from './components/PersonList';\nimport Message from './components/Message';\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]); \n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ nameLookup, setNameLookup ] = useState({});\n  const [ filterPattern, setFilterPattern] = useState('');\n  const [ message, setMessage ] = useState();\n\n  const syncWithServer = () => {\n    entryService\n    .getAll()\n    .then(data => {\n      setPersons(data);\n      const lookup = {};\n      data.forEach(entry => {\n        lookup[entry.name] = entry.id;\n      });\n      setNameLookup(lookup);\n    });\n  };\n\n  useEffect(syncWithServer, []);\n\n  const clearMessage = (myMessage) => {\n    if (!myMessage) return;\n\n    clearTimeout(myMessage.timeout);\n    setMessage(null);\n  };\n\n  const showMessage = (msg, type) => {\n    const myMessage = {\n      text: msg,\n      timeout: setTimeout(() => clearMessage(myMessage), 5000),\n      type\n    };\n\n    clearMessage(message);\n    setMessage(myMessage);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (newName === '') {\n      alert('no name entered');\n      return;\n    }\n\n    if (!!nameLookup[newName]) {\n      if (!window.confirm(`${newName} is already added to phonebook. Would you like to update the existing number?`)) {\n        return;\n      }\n\n      entryService\n        .update({id: nameLookup[newName], name: newName, number: newNumber})\n        .then(data => {\n          setPersons(persons.map(entry => entry.id === nameLookup[newName] ? {...entry, number: newNumber} : entry))\n          showMessage(`Entry ${newName} has been updated.`, 1 /* success */);\n        })\n        .catch(error => {\n          showMessage(`Entry ${newName} could not be updated.`, 2 /* error */);\n          syncWithServer();\n        });\n      \n      \n    } else {\n      entryService\n      .create({name: newName, number: newNumber})\n      .then(data => {\n        setPersons(persons.concat(data));\n        setNameLookup({...nameLookup, [data.name]: data.id});\n        showMessage(`Entry ${newName} has been created.`, 1 /* success */);\n      });\n    }\n\n    setNewName('');\n    setNewNumber('');  \n  };\n\n  const makeClickHandler = ({ id, name }) => (e) => {\n    if (!window.confirm(`delete ${name}?`)) return;\n\n    entryService\n      .remove(id)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== id));\n        setNameLookup({...nameLookup, [name]: false});\n        showMessage(`Entry ${name} has been removed.`, 1 /* success */);\n      })\n      .catch(error => {\n        showMessage(`Entry ${name} could not be removed.`, 2 /* error */);\n        syncWithServer();\n      });\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      {!!message ? <Message message={message} /> : null}\n      <Filter \n        filterPattern={filterPattern}\n        setFilterPattern={setFilterPattern}\n      />\n      <h2>add a new</h2>\n      <NewEntryForm \n        newName={newName} \n        setNewName={setNewName} \n        newNumber={newNumber} \n        setNewNumber={setNewNumber} \n        handleSubmit={handleSubmit}\n      />\n      <h2>Numbers</h2>\n      <PersonList persons={persons} filterPattern={filterPattern} makeClickHandler={makeClickHandler} />\n    </div>\n  )\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}