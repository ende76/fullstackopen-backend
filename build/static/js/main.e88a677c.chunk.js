(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(15),c=n.n(u),l=(n(21),n(3)),o=n(5),i=n(2),m=n(4),s=n.n(m),d="/api/persons/",f=function(e){return s.a.post(d,e).then((function(e){return e.data}))},b=function(){return s.a.get(d).then((function(e){return e.data}))},E=function(e){return s.a.delete(d+e).then((function(e){return e.data}))},h=function(e){return s.a.put(d+e.id,e).then((function(e){return e.data}))},p=function(e){var t=e.filterPattern,n=e.setFilterPattern;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"filter shown with"),r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},v=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,u=e.setNewNumber,c=e.handleSubmit;return r.a.createElement("form",{onSubmit:c},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"name:"),r.a.createElement("td",null,r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"number:"),r.a.createElement("td",null,r.a.createElement("input",{value:a,onChange:function(e){return u(e.target.value)}}))))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},w=function(e){var t=e.data,n=t.id,a=t.name,u=t.number,c=e.makeClickHandler;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,u),r.a.createElement("td",null,r.a.createElement("button",{onClick:c({id:n,name:a})},"delete")))};var O=function(e){var t=e.persons,n=e.filterPattern,a=e.makeClickHandler,u=t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>=0})).map((function(e){return r.a.createElement(w,{key:e.id,data:e,makeClickHandler:a})}));return r.a.createElement("table",null,r.a.createElement("tbody",null,u))},j=function(e){var t=e.message,n=t.text,a=t.type;return r.a.createElement("div",{className:"message "+(1===a?"success":"error")},r.a.createElement("span",null,n))},k=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),m=Object(i.a)(c,2),s=m[0],d=m[1],w=Object(a.useState)(""),k=Object(i.a)(w,2),g=k[0],N=k[1],y=Object(a.useState)({}),C=Object(i.a)(y,2),S=C[0],P=C[1],x=Object(a.useState)(""),H=Object(i.a)(x,2),F=H[0],J=H[1],L=Object(a.useState)(),T=Object(i.a)(L,2),B=T[0],D=T[1],I=function(){b().then((function(e){u(e);var t={};e.forEach((function(e){t[e.name]=e.id})),P(t)}))};Object(a.useEffect)(I,[]);var M=function(e){e&&(clearTimeout(e.timeout),D(null))},W=function(e,t){var n={text:e,timeout:setTimeout((function(){return M(n)}),5e3),type:t};M(B),D(n)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),B?r.a.createElement(j,{message:B}):null,r.a.createElement(p,{filterPattern:F,setFilterPattern:J}),r.a.createElement("h2",null,"add a new"),r.a.createElement(v,{newName:s,setNewName:d,newNumber:g,setNewNumber:N,handleSubmit:function(e){if(e.preventDefault(),""!==s){if(S[s]){if(!window.confirm("".concat(s," is already added to phonebook. Would you like to update the existing number?")))return;h({id:S[s],name:s,number:g}).then((function(e){u(n.map((function(e){return e.id===S[s]?Object(o.a)({},e,{number:g}):e}))),W("Entry ".concat(s," has been updated."),1)})).catch((function(e){var t=e.response.data.message;W(t,2),I()}))}else f({name:s,number:g}).then((function(e){u(n.concat(e)),P(Object(o.a)({},S,Object(l.a)({},e.name,e.id))),W("Entry ".concat(s," has been created."),1)})).catch((function(e){var t=e.response.data.message;return W(t,2)}));d(""),N("")}else alert("no name entered")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(O,{persons:n,filterPattern:F,makeClickHandler:function(e){var t=e.id,a=e.name;return function(e){window.confirm("delete ".concat(a,"?"))&&E(t).then((function(){u(n.filter((function(e){return e.id!==t}))),P(Object(o.a)({},S,Object(l.a)({},a,!1))),W("Entry ".concat(a," has been removed."),1)})).catch((function(e){var t=e.response.data.message;W(t,2),I()}))}}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.e88a677c.chunk.js.map