(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(15),c=n.n(u),l=(n(21),n(3)),o=n(5),i=n(2),m=n(4),d=n.n(m),f="https://phonebook-fullstackopen-ende.herokuapp.com/api/persons/",s=function(e){return d.a.post(f,e).then((function(e){return e.data}))},b=function(){return d.a.get(f).then((function(e){return e.data}))},E=function(e){return d.a.delete(f+e).then((function(e){return e.data}))},h=function(e){return d.a.put(f+e.id,e).then((function(e){return e.data}))},p=function(e){var t=e.filterPattern,n=e.setFilterPattern;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"filter shown with"),r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},v=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,u=e.setNewNumber,c=e.handleSubmit;return r.a.createElement("form",{onSubmit:c},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"name:"),r.a.createElement("td",null,r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))),r.a.createElement("tr",null,r.a.createElement("td",null,"number:"),r.a.createElement("td",null,r.a.createElement("input",{value:a,onChange:function(e){return u(e.target.value)}}))))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},k=function(e){var t=e.data,n=t.id,a=t.name,u=t.number,c=e.makeClickHandler;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,u),r.a.createElement("td",null,r.a.createElement("button",{onClick:c({id:n,name:a})},"delete")))};var w=function(e){var t=e.persons,n=e.filterPattern,a=e.makeClickHandler,u=t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>=0})).map((function(e){return r.a.createElement(k,{key:e.id,data:e,makeClickHandler:a})}));return r.a.createElement("table",null,r.a.createElement("tbody",null,u))},O=function(e){var t=e.message,n=t.text,a=t.type;return r.a.createElement("div",{className:"message "+(1===a?"success":"error")},r.a.createElement("span",null,n))},j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),m=Object(i.a)(c,2),d=m[0],f=m[1],k=Object(a.useState)(""),j=Object(i.a)(k,2),y=j[0],N=j[1],g=Object(a.useState)({}),C=Object(i.a)(g,2),S=C[0],P=C[1],x=Object(a.useState)(""),H=Object(i.a)(x,2),F=H[0],J=H[1],L=Object(a.useState)(),T=Object(i.a)(L,2),B=T[0],D=T[1],I=function(){b().then((function(e){u(e);var t={};e.forEach((function(e){t[e.name]=e.id})),P(t)}))};Object(a.useEffect)(I,[]);var M=function(e){e&&(clearTimeout(e.timeout),D(null))},W=function(e,t){var n={text:e,timeout:setTimeout((function(){return M(n)}),5e3),type:t};M(B),D(n)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),B?r.a.createElement(O,{message:B}):null,r.a.createElement(p,{filterPattern:F,setFilterPattern:J}),r.a.createElement("h2",null,"add a new"),r.a.createElement(v,{newName:d,setNewName:f,newNumber:y,setNewNumber:N,handleSubmit:function(e){if(e.preventDefault(),""!==d){if(S[d]){if(!window.confirm("".concat(d," is already added to phonebook. Would you like to update the existing number?")))return;h({id:S[d],name:d,number:y}).then((function(e){u(n.map((function(e){return e.id===S[d]?Object(o.a)({},e,{number:y}):e}))),W("Entry ".concat(d," has been updated."),1)})).catch((function(e){W("Entry ".concat(d," could not be updated."),2),I()}))}else s({name:d,number:y}).then((function(e){u(n.concat(e)),P(Object(o.a)({},S,Object(l.a)({},e.name,e.id))),W("Entry ".concat(d," has been created."),1)}));f(""),N("")}else alert("no name entered")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{persons:n,filterPattern:F,makeClickHandler:function(e){var t=e.id,a=e.name;return function(e){window.confirm("delete ".concat(a,"?"))&&E(t).then((function(){u(n.filter((function(e){return e.id!==t}))),P(Object(o.a)({},S,Object(l.a)({},a,!1))),W("Entry ".concat(a," has been removed."),1)})).catch((function(e){W("Entry ".concat(a," could not be removed."),2),I()}))}}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.00a86afc.chunk.js.map